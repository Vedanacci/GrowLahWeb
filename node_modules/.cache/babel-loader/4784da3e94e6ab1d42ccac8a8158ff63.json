{"ast":null,"code":"import _classCallCheck from\"/Users/vedantbahadur/Documents/Programming/HTML/Firebase dashboard 2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/vedantbahadur/Documents/Programming/HTML/Firebase dashboard 2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/vedantbahadur/Documents/Programming/HTML/Firebase dashboard 2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/vedantbahadur/Documents/Programming/HTML/Firebase dashboard 2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/vedantbahadur/Documents/Programming/HTML/Firebase dashboard 2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/*!\n\n=========================================================\n* Material Dashboard React - v1.9.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/material-dashboard-react\n* Copyright 2020 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/material-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/import React,{Component}from\"react\";import ReactDOM from\"react-dom\";import{createBrowserHistory}from\"history\";import{Router,Route,Switch,Redirect}from\"react-router-dom\";import firebase from\"firebase\";// import \"firebase/database\";\n// import {\n//   FirebaseDatabaseProvider,\n//   FirebaseDatabaseNode\n// } from \"@react-firebase/database\";\nimport{db_config}from\"config\";import dashboard from\"views/Dashboard/Dashboard\";// core components\nimport Admin from\"layouts/Admin.js\";import RTL from\"layouts/RTL.js\";import\"assets/css/material-dashboard-react.css?v=1.9.0\";import Dashboard from\"views/Dashboard/Dashboard\";import{dataPoints,allMetrics,allMetricsSide,lightlevels1,humiditylevels1,ph1,temp1,toggleConst}from\"variables/charts.js\";import Login from\"views/Login/login\";var newLevels=[];var newLevelsSide=[];var path=\"vedantbahadur\";var pctg=0.25;var delta=10;var hist=createBrowserHistory();var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.app=firebase.initializeApp(db_config);_this.auth=firebase.auth();_this.database=firebase.database().ref().child(path);_this.firestore=firebase.firestore();_this.signIn=_this.signIn.bind(_assertThisInitialized(_this));_this.refresh=_this.refresh.bind(_assertThisInitialized(_this));_this.state={speed:[]};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){console.log(\"didmount\");this.signIn(\"test@gmail.com\",\"VedantTest\");}},{key:\"refresh\",value:function refresh(){console.log(\"Refreshing\");// Object.assign(toggleConst, true)\nconsole.log(toggleConst);this.setState({});console.log(\"Refreshed\");// // this.getHumidity();\n// this.signIn(\"test@gmail.com\", \"VedantTest\")\n}},{key:\"signIn\",value:function signIn(email,password){var _this2=this;console.log(\"Signing In\");this.auth.signInWithEmailAndPassword(email,password).then(function(value){console.log(value);console.log(value.user.phoneNumber);_this2.firestore.collection(\"Users\").doc(value.user.uid).collection(\"myGarden\").get().then(function(snap){newLevels=[];newLevelsSide=[];snap.forEach(function(doc){console.log(\"\".concat(doc.id,\" => \").concat(doc.data()));path=doc.data.path;_this2.getIOTData(doc.id);newLevelsSide.push(doc.id);});Object.assign(allMetricsSide,newLevelsSide);});});}},{key:\"compareObjects\",value:function compareObjects(object1,object2,key){var obj1=object1[key].toUpperCase();var obj2=object2[key].toUpperCase();if(obj1<obj2){return-1;}if(obj1>obj2){return 1;}return 0;}},{key:\"getHumidity\",value:function getHumidity(snap,humidity,labels,name){var lightArray=[];console.log(\"Toggle is\");console.log(toggleConst);if(toggleConst){lightArray=snap.val();}else{// var lightArrayIn = snap.val().slice(-dataPoints*delta);\n// for (var i = 0; i < lightArrayIn.length; i=i+delta) {\n//   lightArray.push(lightArrayIn[i]);\n// } \nlightArray=snap.val();}console.log(lightArray);humidity.data={labels:labels,series:[lightArray]};humidity.title=name+\" Humidity (%)\";humidity.high=85;humidity.low=65;humidity.updateInfo((1-pctg)*Math.min(lightArray),(1+pctg)*Math.max(lightArray));if(!newLevels.includes(humidity)){newLevels.push(humidity);}Object.assign(allMetrics,newLevels);console.log(\"allmetrics is\");console.log(allMetrics);this.setState({});}},{key:\"getIOTData\",value:function getIOTData(name){var _this3=this;var Chartist=require(\"chartist\");var lightLevels={data:{labels:[],series:[[12,17,7,17,23,18,10]]},options:{showArea:true,lineSmooth:Chartist.Interpolation.cardinal({tension:200}),low:0,high:100,// creative tim: we recommend you to set the high sa the biggest value + something for a better look\nchartPadding:{top:20,right:10,bottom:0,left:-10}},title:\"System 1 Light (%)\",high:8,low:6// for animation\n};// Object.assign(lightLevels, lightlevels1);\nvar humidity={};Object.assign(humidity,humiditylevels1);var ph={};Object.assign(ph,ph1);var temp={};Object.assign(temp,temp1);this.database.child(\"startTime\").on('value',function(start){var startTime=start.val()['hour'];var min=start.val()['min'];_this3.database.child(\"elapsed\").on('value',function(val){var ms=val.val()+startTime*3600000;var hour=Math.floor(ms*1.15740741*Math.pow(10,-8)%1*24);var mins=Math.floor(ms/60000)%60;console.log(mins);mins=(mins+min)%60;console.log(mins);console.log(\"Hours\",hour);var labels=[];for(var count=0;count<dataPoints;count++){var lbl=hour-(dataPoints-1-count)*2;console.log(lbl);if(lbl<0){lbl=24+lbl;}var zeroPad=function zeroPad(num,places){return String(num).padStart(places,'0');};labels.push(zeroPad(lbl,2)+\":\"+zeroPad(mins,2));}_this3.database.child(\"light\").on('value',function(snap){console.log(\"printing\");var lightArray=snap.val();for(var count=0;count<lightArray.length;count+=1){lightArray[count]=Math.round(lightArray[count]*10000/4095.0)/100;}console.log(\"Lightlevel\");console.log(lightArray);lightLevels.data={labels:labels,series:[lightArray]};lightLevels.title=name+\" Light (%)\";lightLevels.high=100;lightLevels.low=0;console.log(lightLevels.data.series);if(!newLevels.includes(lightLevels)){newLevels.push(lightLevels);}Object.assign(allMetrics,newLevels);console.log(\"allmetrics is\");console.log(allMetrics);_this3.setState({});});_this3.database.child(\"humidity\").on('value',function(snap){console.log(\"printing\");// var lightArray = snap.val().slice(-dataPoints);\n_this3.getHumidity(snap,humidity,labels,name);});_this3.database.child(\"ph\").on('value',function(snap){console.log(\"printing\");var lightArray=snap.val();console.log(lightArray);ph.data={labels:labels,series:[lightArray]};ph.title=name+\" PH (0-14)\";ph.high=8.5;ph.low=7;ph.updateInfo((1-pctg)*Math.min(lightArray),(1+pctg)*Math.max(lightArray));if(!newLevels.includes(ph)){newLevels.push(ph);}Object.assign(allMetrics,newLevels);console.log(\"allmetrics is\");console.log(allMetrics);_this3.setState({});});_this3.database.child(\"temp\").on('value',function(snap){console.log(\"printing\");var lightArray=snap.val();console.log(lightArray);temp.data={labels:labels,series:[lightArray]};temp.title=name+\" Temp (ËšC)\";temp.high=32;temp.low=27;temp.updateInfo((1-pctg)*Math.min(lightArray),(1+pctg)*Math.max(lightArray));if(!newLevels.includes(temp)){newLevels.push(temp);}newLevels.sort(function(first,second){console.log(first,second);return _this3.compareObjects(first,second,\"title\");});console.log(newLevels);Object.assign(allMetrics,newLevels);console.log(\"allmetrics is\");console.log(allMetrics);_this3.setState({});});});});}},{key:\"render\",value:function render(){var _this4=this;console.log(\"rendering\");// if (this.auth.currentUser == null) {\n//   return (\n//     <Login fn={this.signIn} />\n//   )\n// } else {\nreturn/*#__PURE__*/React.createElement(Router,{history:hist},/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:\"/admin\",render:function render(props){return/*#__PURE__*/React.createElement(Admin,{refresh:_this4.refresh});}}),/*#__PURE__*/React.createElement(Redirect,{from:\"/\",to:\"/admin/dashboard\"})))// <div>\n//   <h1>Count is {this.state.speed}</h1>\n// </div>\n;// }\n}}]);return App;}(Component);ReactDOM.render(/*#__PURE__*/React.createElement(App,null),document.getElementById(\"root\"));","map":{"version":3,"sources":["/Users/vedantbahadur/Documents/Programming/HTML/Firebase dashboard 2/src/index.js"],"names":["React","Component","ReactDOM","createBrowserHistory","Router","Route","Switch","Redirect","firebase","db_config","dashboard","Admin","RTL","Dashboard","dataPoints","allMetrics","allMetricsSide","lightlevels1","humiditylevels1","ph1","temp1","toggleConst","Login","newLevels","newLevelsSide","path","pctg","delta","hist","App","props","app","initializeApp","auth","database","ref","child","firestore","signIn","bind","refresh","state","speed","console","log","setState","email","password","signInWithEmailAndPassword","then","value","user","phoneNumber","collection","doc","uid","get","snap","forEach","id","data","getIOTData","push","Object","assign","object1","object2","key","obj1","toUpperCase","obj2","humidity","labels","name","lightArray","val","series","title","high","low","updateInfo","Math","min","max","includes","Chartist","require","lightLevels","options","showArea","lineSmooth","Interpolation","cardinal","tension","chartPadding","top","right","bottom","left","ph","temp","on","start","startTime","ms","hour","floor","mins","count","lbl","zeroPad","num","places","String","padStart","length","round","getHumidity","sort","first","second","compareObjects","render","document","getElementById"],"mappings":"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","sourcesContent":["/*!\n\n=========================================================\n* Material Dashboard React - v1.9.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/material-dashboard-react\n* Copyright 2020 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/material-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/\nimport React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { createBrowserHistory } from \"history\";\nimport { Router, Route, Switch, Redirect } from \"react-router-dom\";\n\nimport firebase from \"firebase\";\n// import \"firebase/database\";\n// import {\n//   FirebaseDatabaseProvider,\n//   FirebaseDatabaseNode\n// } from \"@react-firebase/database\";\nimport { db_config } from \"config\";\n\nimport dashboard from \"views/Dashboard/Dashboard\"\n\n// core components\nimport Admin from \"layouts/Admin.js\";\nimport RTL from \"layouts/RTL.js\";\n\nimport \"assets/css/material-dashboard-react.css?v=1.9.0\";\nimport Dashboard from \"views/Dashboard/Dashboard\";\n\nimport {\n  dataPoints,\n  allMetrics,\n  allMetricsSide,\n  lightlevels1,\n  humiditylevels1,\n  ph1,\n  temp1,\n  toggleConst\n} from \"variables/charts.js\";\nimport Login from \"views/Login/login\";\n\nvar newLevels = [];\nvar newLevelsSide = [];\nvar path = \"vedantbahadur\"\nvar pctg = 0.25;\nvar delta = 10;\n\nconst hist = createBrowserHistory();\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n\n    this.app = firebase.initializeApp(db_config);\n    this.auth = firebase.auth()\n    this.database = firebase.database().ref().child(path);\n    this.firestore = firebase.firestore()\n    this.signIn = this.signIn.bind(this)\n    this.refresh = this.refresh.bind(this)\n    this.state = {\n      speed: [],\n    };\n  }\n\n  componentDidMount() {\n    console.log(\"didmount\")\n    this.signIn(\"test@gmail.com\", \"VedantTest\");\n  }\n\n  refresh() {\n    console.log(\"Refreshing\")\n    // Object.assign(toggleConst, true)\n    console.log(toggleConst);\n    this.setState({});\n    console.log(\"Refreshed\")\n    // // this.getHumidity();\n    // this.signIn(\"test@gmail.com\", \"VedantTest\")\n  }\n\n  signIn(email, password) {\n    console.log(\"Signing In\")\n    this.auth.signInWithEmailAndPassword(email, password).then(value => {\n      console.log(value);\n      console.log(value.user.phoneNumber);\n      this.firestore.collection(\"Users\").doc(value.user.uid).collection(\"myGarden\").get().then(\n        (snap) => {\n          newLevels = [];\n          newLevelsSide = [];\n          snap.forEach((doc) => {\n            console.log(`${doc.id} => ${doc.data()}`);\n            path = doc.data.path\n            this.getIOTData(doc.id);\n            newLevelsSide.push(doc.id);\n          })\n          Object.assign(allMetricsSide, newLevelsSide)\n\n        }\n      )\n    })\n  }\n\n  compareObjects(object1, object2, key) {\n    const obj1 = object1[key].toUpperCase()\n    const obj2 = object2[key].toUpperCase()\n\n    if (obj1 < obj2) {\n      return -1\n    }\n    if (obj1 > obj2) {\n      return 1\n    }\n    return 0\n  }\n\n  getHumidity(snap, humidity, labels, name) {\n    var lightArray = [];\n    console.log(\"Toggle is\")\n    console.log(toggleConst)\n    if (toggleConst) {\n      lightArray = snap.val();\n    }\n    else {\n      // var lightArrayIn = snap.val().slice(-dataPoints*delta);\n      // for (var i = 0; i < lightArrayIn.length; i=i+delta) {\n      //   lightArray.push(lightArrayIn[i]);\n      // } \n      lightArray = snap.val();\n    }\n\n    console.log(lightArray)\n    humidity.data = {\n      labels: labels,\n      series: [lightArray]\n    }\n    humidity.title = name + \" Humidity (%)\"\n    humidity.high = 85\n    humidity.low = 65\n    humidity.updateInfo((1 - pctg) * Math.min(lightArray), (1 + pctg) * Math.max(lightArray))\n    if (!newLevels.includes(humidity)) {\n      newLevels.push(humidity)\n    }\n    Object.assign(allMetrics, newLevels)\n    console.log(\"allmetrics is\")\n    console.log(allMetrics)\n    this.setState({\n    });\n  }\n\n  getIOTData(name) {\n    var Chartist = require(\"chartist\");\n    var lightLevels = {\n      data: {\n        labels: [],\n        series: [[12, 17, 7, 17, 23, 18, 10]]\n      },\n      options: {\n        showArea: true,\n        lineSmooth: Chartist.Interpolation.cardinal({\n          tension: 200\n        }),\n        low: 0,\n        high: 100, // creative tim: we recommend you to set the high sa the biggest value + something for a better look\n        chartPadding: {\n          top: 20,\n          right: 10,\n          bottom: 0,\n          left: -10\n        }\n      },\n      title: \"System 1 Light (%)\",\n      high: 8,\n      low: 6\n      // for animation\n\n    }\n    // Object.assign(lightLevels, lightlevels1);\n    var humidity = {}\n    Object.assign(humidity, humiditylevels1);\n    var ph = {}\n    Object.assign(ph, ph1);\n    var temp = {}\n    Object.assign(temp, temp1);\n    this.database.child(\"startTime\").on('value', (start) => {\n      var startTime = start.val()['hour']\n      var min = start.val()['min']\n      this.database.child(\"elapsed\").on('value', (val) => {\n        var ms = val.val() + startTime * 3600000\n        var hour = Math.floor(((ms * 1.15740741 * (10 ** (-8))) % 1) * 24);\n        var mins = (Math.floor(ms / 60000) % 60)\n        console.log(mins)\n        mins = (mins + min) % 60\n        console.log(mins)\n        console.log(\"Hours\", hour);\n        var labels = [];\n        for (var count = 0; count < dataPoints; count++) {\n          var lbl = hour - (dataPoints - 1 - count) * 2\n          console.log(lbl)\n          if (lbl < 0) {\n            lbl = 24 + lbl\n          }\n          const zeroPad = (num, places) => String(num).padStart(places, '0')\n          labels.push(zeroPad(lbl, 2) + \":\" + zeroPad(mins, 2))\n        }\n        this.database.child(\"light\").on('value', (snap) => {\n          console.log(\"printing\")\n          var lightArray = snap.val();\n          for (var count = 0; count < lightArray.length; count += 1) {\n            lightArray[count] = Math.round((lightArray[count] * 10000 / 4095.0)) / 100\n          }\n          console.log(\"Lightlevel\")\n          console.log(lightArray)\n          lightLevels.data = {\n            labels: labels,\n            series: [lightArray]\n          }\n          lightLevels.title = name + \" Light (%)\"\n          lightLevels.high = 100\n          lightLevels.low = 0\n          console.log(lightLevels.data.series)\n          if (!newLevels.includes(lightLevels)) {\n            newLevels.push(lightLevels)\n          }\n          Object.assign(allMetrics, newLevels)\n          console.log(\"allmetrics is\")\n          console.log(allMetrics)\n          this.setState({\n          });\n        });\n        this.database.child(\"humidity\").on('value', (snap) => {\n          console.log(\"printing\")\n          // var lightArray = snap.val().slice(-dataPoints);\n          this.getHumidity(snap, humidity, labels, name)\n        });\n        this.database.child(\"ph\").on('value', (snap) => {\n          console.log(\"printing\")\n          var lightArray = snap.val();\n          console.log(lightArray)\n          ph.data = {\n            labels: labels,\n            series: [lightArray]\n          }\n          ph.title = name + \" PH (0-14)\"\n          ph.high = 8.5\n          ph.low = 7\n          ph.updateInfo((1 - pctg) * Math.min(lightArray), (1 + pctg) * Math.max(lightArray))\n          if (!newLevels.includes(ph)) {\n            newLevels.push(ph)\n          }\n          Object.assign(allMetrics, newLevels)\n          console.log(\"allmetrics is\")\n          console.log(allMetrics)\n          this.setState({\n          });\n        });\n        this.database.child(\"temp\").on('value', (snap) => {\n          console.log(\"printing\")\n          var lightArray = snap.val();\n          console.log(lightArray)\n          temp.data = {\n            labels: labels,\n            series: [lightArray]\n          }\n          temp.title = name + \" Temp (ËšC)\"\n          temp.high = 32\n          temp.low = 27\n          temp.updateInfo((1 - pctg) * Math.min(lightArray), (1 + pctg) * Math.max(lightArray))\n          if (!newLevels.includes(temp)) {\n            newLevels.push(temp)\n          }\n          newLevels.sort((first, second) => {\n            console.log(first, second);\n            return this.compareObjects(first, second, \"title\");\n          });\n          console.log(newLevels)\n          Object.assign(allMetrics, newLevels)\n          console.log(\"allmetrics is\")\n          console.log(allMetrics)\n          this.setState({\n          });\n        });\n      });\n    })\n  };\n\n  render() {\n    console.log(\"rendering\");\n    // if (this.auth.currentUser == null) {\n    //   return (\n    //     <Login fn={this.signIn} />\n    //   )\n    // } else {\n    return (\n      <Router history={hist}>\n        <Switch>\n          {/* <Admin></Admin> */}\n          <Route path=\"/admin\" render={props => <Admin refresh={this.refresh} />} />\n          {/* <Route path=\"/rtl\" component={RTL} /> */}\n          <Redirect from=\"/\" to=\"/admin/dashboard\" />\n          {/* <Dashboard/> */}\n        </Switch>\n      </Router>\n      // <div>\n      //   <h1>Count is {this.state.speed}</h1>\n      // </div>\n    );\n\n    // }\n\n  }\n}\nReactDOM.render(\n  <App />,\n  document.getElementById(\"root\")\n);\n\n\n"]},"metadata":{},"sourceType":"module"}