{"ast":null,"code":"import _classCallCheck from\"/Users/vedantbahadur/Documents/Programming/HTML/Firebase dashboard 2 2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/vedantbahadur/Documents/Programming/HTML/Firebase dashboard 2 2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/vedantbahadur/Documents/Programming/HTML/Firebase dashboard 2 2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/vedantbahadur/Documents/Programming/HTML/Firebase dashboard 2 2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/vedantbahadur/Documents/Programming/HTML/Firebase dashboard 2 2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/*!\n\n=========================================================\n* Material Dashboard React - v1.9.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/material-dashboard-react\n* Copyright 2020 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/material-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/import React,{Component}from\"react\";import ReactDOM from\"react-dom\";import{createBrowserHistory}from\"history\";import{Router,Route,Switch,Redirect}from\"react-router-dom\";import firebase from\"firebase\";// import \"firebase/database\";\n// import {\n//   FirebaseDatabaseProvider,\n//   FirebaseDatabaseNode\n// } from \"@react-firebase/database\";\nimport{db_config}from\"config\";import dashboard from\"views/Dashboard/Dashboard\";// core components\nimport Admin from\"layouts/Admin.js\";import RTL from\"layouts/RTL.js\";import\"assets/css/material-dashboard-react.css?v=1.9.0\";import Dashboard from\"views/Dashboard/Dashboard\";import{dataPoints,allMetrics,allMetricsSide,lightlevels1,humiditylevels1,ph1,temp1,toggleConst}from\"variables/charts.js\";import Login from\"views/Login/login\";var newLevels=[];var newLevelsSide=[];var path=\"vedantbahadur\";var pctg=0.25;var delta=10;var systemName='';var hist=createBrowserHistory();var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.app=firebase.initializeApp(db_config);_this.auth=firebase.auth();_this.database=firebase.database().ref().child(path);_this.firestore=firebase.firestore();_this.signIn=_this.signIn.bind(_assertThisInitialized(_this));_this.refresh=_this.refresh.bind(_assertThisInitialized(_this));_this.state={speed:[]};_this.systemName=systemName;return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){//console.log(\"didmount\")\n}},{key:\"refresh\",value:function refresh(){//console.log(\"Refreshing\")\n// Object.assign(toggleConst, true)\n//console.log(toggleConst);\nthis.setState({});//console.log(\"Refreshed\")\n// // this.getHumidity();\n// this.signIn(\"test@gmail.com\", \"VedantTest\")\n}},{key:\"signIn\",value:function signIn(email,password){var _this2=this;//console.log(\"Signing In\")\nthis.auth.signInWithEmailAndPassword(email,password).then(function(value){//console.log(value);\n//console.log(value.user.phoneNumber);\n_this2.firestore.collection(\"Users\").doc(value.user.uid).collection(\"myGarden\").get().then(function(snap){newLevels=[];newLevelsSide=[];snap.forEach(function(doc){//console.log(`${doc.id} => ${doc.data()}`);\npath=doc.data()['path'];_this2.database=firebase.database().ref().child(path);_this2.getIOTData(doc.id);newLevelsSide.push(doc.id);});Object.assign(allMetricsSide,newLevelsSide);});});}},{key:\"compareObjects\",value:function compareObjects(object1,object2,key){var obj1=object1[key].toUpperCase();var obj2=object2[key].toUpperCase();if(obj1<obj2){return-1;}if(obj1>obj2){return 1;}return 0;}},{key:\"getHumidity\",value:function getHumidity(snap,humidity,labels,name){var lightArray=[];//console.log(\"Toggle is\")\n//console.log(toggleConst)\nif(toggleConst){lightArray=snap.val();}else{// var lightArrayIn = snap.val().slice(-dataPoints*delta);\n// for (var i = 0; i < lightArrayIn.length; i=i+delta) {\n//   lightArray.push(lightArrayIn[i]);\n// } \nlightArray=snap.val();}//console.log(lightArray)\nhumidity.data={labels:labels,series:[lightArray]};humidity.title=\"Humidity (%)\";humidity.high=85;humidity.low=65;humidity.updateInfo((1-pctg)*Math.min(lightArray),(1+pctg)*Math.max(lightArray));if(!newLevels.includes(humidity)){newLevels.push(humidity);}Object.assign(allMetrics,newLevels);//console.log(\"allmetrics is\")\n//console.log(allMetrics)\nthis.setState({});}},{key:\"getIOTData\",value:function getIOTData(name){var _this3=this;// Object.assign(lightLevels, lightlevels1);\nvar humidity={};Object.assign(humidity,humiditylevels1);var ph={};Object.assign(ph,ph1);var temp={};Object.assign(temp,temp1);this.database.child(\"startTime\").on('value',function(start){var startTime=start.val()['hour'];var min=start.val()['min'];_this3.database.child(\"elapsed\").on('value',function(val){var ms=val.val()+startTime*3600000;var hour=Math.floor(ms*1.15740741*Math.pow(10,-8)%1*24);var mins=Math.floor(ms/60000)%60;//console.log(mins)\nmins=(mins+min)%60;//console.log(mins)\n//console.log(\"Hours\", hour);\nvar labels=[];for(var count=0;count<dataPoints;count++){var lbl=hour-(dataPoints-1-count)*2;//console.log(lbl)\nif(lbl<0){lbl=24+lbl;}var zeroPad=function zeroPad(num,places){return String(num).padStart(places,'0');};labels.push(zeroPad(lbl,2)+\":\"+zeroPad(mins,2));}_this3.database.child(\"light\").on('value',function(snap){//console.log(\"printing\")\nvar lightArray=snap.val();for(var count=0;count<lightArray.length;count+=1){lightArray[count]=Math.round(lightArray[count]*10000/4095.0)/100;}//console.log(\"Lightlevel\")\n//console.log(lightArray)\nlightlevels1.data={labels:labels,series:[lightArray]};lightlevels1.title=\"Light (%)\";lightlevels1.high=100;lightlevels1.low=0;//console.log(lightlevels1.data.series)\nif(!newLevels.includes(lightlevels1)){newLevels.push(lightlevels1);}Object.assign(allMetrics,newLevels);//console.log(\"allmetrics is\")\n//console.log(allMetrics)\n_this3.setState({});});_this3.database.child(\"humidity\").on('value',function(snap){//console.log(\"printing\")\n// var lightArray = snap.val().slice(-dataPoints);\n_this3.getHumidity(snap,humidity,labels,name);});_this3.database.child(\"ph\").on('value',function(snap){//console.log(\"printing\")\nvar lightArray=snap.val();//console.log(lightArray)\nph.data={labels:labels,series:[lightArray]};ph.title=\"PH (0-14)\";ph.high=7.1;ph.low=6.5;ph.updateInfo((1-pctg)*Math.min(lightArray),(1+pctg)*Math.max(lightArray));if(!newLevels.includes(ph)){newLevels.push(ph);}Object.assign(allMetrics,newLevels);//console.log(\"allmetrics is\")\n//console.log(allMetrics)\n_this3.setState({});});_this3.database.child(\"temp\").on('value',function(snap){//console.log(\"printing\")\nvar lightArray=snap.val();//console.log(lightArray)\ntemp.data={labels:labels,series:[lightArray]};temp.title=\"Temp (ËšC)\";//name +\ntemp.high=32;temp.low=27;temp.updateInfo((1-pctg)*Math.min(lightArray),(1+pctg)*Math.max(lightArray));if(!newLevels.includes(temp)){newLevels.push(temp);}newLevels.sort(function(first,second){//console.log(first, second);\nreturn _this3.compareObjects(first,second,\"title\");});//console.log(newLevels)\nObject.assign(allMetrics,newLevels);//console.log(\"allmetrics is\")\n//console.log(allMetrics)\n_this3.systemName=name;_this3.setState({});});});});}},{key:\"render\",value:function render(){var _this4=this;//console.log(\"rendering\");\nif(this.auth.currentUser==null){return/*#__PURE__*/React.createElement(Login,{fn:this.signIn});}else{return/*#__PURE__*/React.createElement(Router,{history:hist},/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:\"/admin\",render:function render(props){return/*#__PURE__*/React.createElement(Admin,{refresh:_this4.refresh,systemName:_this4.systemName});}}),/*#__PURE__*/React.createElement(Redirect,{from:\"/\",to:\"/admin/dashboard\"})))// <div>\n//   <h1>Count is {this.state.speed}</h1>\n// </div>\n;}}}]);return App;}(Component);ReactDOM.render(/*#__PURE__*/React.createElement(App,null),document.getElementById(\"root\"));","map":{"version":3,"sources":["/Users/vedantbahadur/Documents/Programming/HTML/Firebase dashboard 2 2/src/index.js"],"names":["React","Component","ReactDOM","createBrowserHistory","Router","Route","Switch","Redirect","firebase","db_config","dashboard","Admin","RTL","Dashboard","dataPoints","allMetrics","allMetricsSide","lightlevels1","humiditylevels1","ph1","temp1","toggleConst","Login","newLevels","newLevelsSide","path","pctg","delta","systemName","hist","App","props","app","initializeApp","auth","database","ref","child","firestore","signIn","bind","refresh","state","speed","setState","email","password","signInWithEmailAndPassword","then","value","collection","doc","user","uid","get","snap","forEach","data","getIOTData","id","push","Object","assign","object1","object2","key","obj1","toUpperCase","obj2","humidity","labels","name","lightArray","val","series","title","high","low","updateInfo","Math","min","max","includes","ph","temp","on","start","startTime","ms","hour","floor","mins","count","lbl","zeroPad","num","places","String","padStart","length","round","getHumidity","sort","first","second","compareObjects","currentUser","render","document","getElementById"],"mappings":"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","sourcesContent":["/*!\n\n=========================================================\n* Material Dashboard React - v1.9.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/material-dashboard-react\n* Copyright 2020 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/material-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/\nimport React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { createBrowserHistory } from \"history\";\nimport { Router, Route, Switch, Redirect } from \"react-router-dom\";\n\nimport firebase from \"firebase\";\n// import \"firebase/database\";\n// import {\n//   FirebaseDatabaseProvider,\n//   FirebaseDatabaseNode\n// } from \"@react-firebase/database\";\nimport { db_config } from \"config\";\n\nimport dashboard from \"views/Dashboard/Dashboard\"\n\n// core components\nimport Admin from \"layouts/Admin.js\";\nimport RTL from \"layouts/RTL.js\";\n\nimport \"assets/css/material-dashboard-react.css?v=1.9.0\";\nimport Dashboard from \"views/Dashboard/Dashboard\";\n\nimport {\n  dataPoints,\n  allMetrics,\n  allMetricsSide,\n  lightlevels1,\n  humiditylevels1,\n  ph1,\n  temp1,\n  toggleConst\n} from \"variables/charts.js\";\nimport Login from \"views/Login/login\";\n\nvar newLevels = [];\nvar newLevelsSide = [];\nvar path = \"vedantbahadur\"\nvar pctg = 0.25;\nvar delta = 10;\nvar systemName = '';\n\nconst hist = createBrowserHistory();\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n\n    this.app = firebase.initializeApp(db_config);\n    this.auth = firebase.auth()\n    this.database = firebase.database().ref().child(path);\n    this.firestore = firebase.firestore()\n    this.signIn = this.signIn.bind(this)\n    this.refresh = this.refresh.bind(this)\n    this.state = {\n      speed: [],\n    };\n    this.systemName = systemName;\n  }\n\n  componentDidMount() {\n    //console.log(\"didmount\")\n  }\n\n  refresh() {\n    //console.log(\"Refreshing\")\n    // Object.assign(toggleConst, true)\n    //console.log(toggleConst);\n    this.setState({});\n    //console.log(\"Refreshed\")\n    // // this.getHumidity();\n    // this.signIn(\"test@gmail.com\", \"VedantTest\")\n  }\n\n  signIn(email, password) {\n    //console.log(\"Signing In\")\n    this.auth.signInWithEmailAndPassword(email, password).then(value => {\n      //console.log(value);\n      //console.log(value.user.phoneNumber);\n      this.firestore.collection(\"Users\").doc(value.user.uid).collection(\"myGarden\").get().then(\n        (snap) => {\n          newLevels = [];\n          newLevelsSide = [];\n          snap.forEach((doc) => {\n            //console.log(`${doc.id} => ${doc.data()}`);\n            path = doc.data()['path'];\n            this.database = firebase.database().ref().child(path);\n            this.getIOTData(doc.id);\n            newLevelsSide.push(doc.id);\n          })\n          Object.assign(allMetricsSide, newLevelsSide)\n\n        }\n      )\n    })\n  }\n\n  compareObjects(object1, object2, key) {\n    const obj1 = object1[key].toUpperCase()\n    const obj2 = object2[key].toUpperCase()\n\n    if (obj1 < obj2) {\n      return -1\n    }\n    if (obj1 > obj2) {\n      return 1\n    }\n    return 0\n  }\n\n  getHumidity(snap, humidity, labels, name) {\n    var lightArray = [];\n    //console.log(\"Toggle is\")\n    //console.log(toggleConst)\n    if (toggleConst) {\n      lightArray = snap.val();\n    }\n    else {\n      // var lightArrayIn = snap.val().slice(-dataPoints*delta);\n      // for (var i = 0; i < lightArrayIn.length; i=i+delta) {\n      //   lightArray.push(lightArrayIn[i]);\n      // } \n      lightArray = snap.val();\n    }\n\n    //console.log(lightArray)\n    humidity.data = {\n      labels: labels,\n      series: [lightArray]\n    }\n    humidity.title = \"Humidity (%)\"\n    humidity.high = 85\n    humidity.low = 65\n    humidity.updateInfo((1 - pctg) * Math.min(lightArray), (1 + pctg) * Math.max(lightArray))\n    if (!newLevels.includes(humidity)) {\n      newLevels.push(humidity)\n    }\n    Object.assign(allMetrics, newLevels)\n    //console.log(\"allmetrics is\")\n    //console.log(allMetrics)\n    this.setState({\n    });\n  }\n\n  getIOTData(name) {\n    // Object.assign(lightLevels, lightlevels1);\n    var humidity = {}\n    Object.assign(humidity, humiditylevels1);\n    var ph = {}\n    Object.assign(ph, ph1);\n    var temp = {}\n    Object.assign(temp, temp1);\n    this.database.child(\"startTime\").on('value', (start) => {\n      var startTime = start.val()['hour']\n      var min = start.val()['min']\n      this.database.child(\"elapsed\").on('value', (val) => {\n        var ms = val.val() + startTime * 3600000\n        var hour = Math.floor(((ms * 1.15740741 * (10 ** (-8))) % 1) * 24);\n        var mins = (Math.floor(ms / 60000) % 60)\n        //console.log(mins)\n        mins = (mins + min) % 60\n        //console.log(mins)\n        //console.log(\"Hours\", hour);\n        var labels = [];\n        for (var count = 0; count < dataPoints; count++) {\n          var lbl = hour - (dataPoints - 1 - count) * 2\n          //console.log(lbl)\n          if (lbl < 0) {\n            lbl = 24 + lbl\n          }\n          const zeroPad = (num, places) => String(num).padStart(places, '0')\n          labels.push(zeroPad(lbl, 2) + \":\" + zeroPad(mins, 2))\n        }\n        this.database.child(\"light\").on('value', (snap) => {\n          //console.log(\"printing\")\n          var lightArray = snap.val();\n          for (var count = 0; count < lightArray.length; count += 1) {\n            lightArray[count] = Math.round((lightArray[count] * 10000 / 4095.0)) / 100\n          }\n          //console.log(\"Lightlevel\")\n          //console.log(lightArray)\n          lightlevels1.data = {\n            labels: labels,\n            series: [lightArray]\n          }\n          lightlevels1.title = \"Light (%)\"\n          lightlevels1.high = 100\n          lightlevels1.low = 0\n          //console.log(lightlevels1.data.series)\n          if (!newLevels.includes(lightlevels1)) {\n            newLevels.push(lightlevels1)\n          }\n          Object.assign(allMetrics, newLevels)\n          //console.log(\"allmetrics is\")\n          //console.log(allMetrics)\n          this.setState({\n          });\n        });\n        this.database.child(\"humidity\").on('value', (snap) => {\n          //console.log(\"printing\")\n          // var lightArray = snap.val().slice(-dataPoints);\n          this.getHumidity(snap, humidity, labels, name)\n        });\n        this.database.child(\"ph\").on('value', (snap) => {\n          //console.log(\"printing\")\n          var lightArray = snap.val();\n          //console.log(lightArray)\n          ph.data = {\n            labels: labels,\n            series: [lightArray]\n          }\n          ph.title = \"PH (0-14)\"\n          ph.high = 7.1\n          ph.low = 6.5\n          ph.updateInfo((1 - pctg) * Math.min(lightArray), (1 + pctg) * Math.max(lightArray))\n          if (!newLevels.includes(ph)) {\n            newLevels.push(ph)\n          }\n          Object.assign(allMetrics, newLevels)\n          //console.log(\"allmetrics is\")\n          //console.log(allMetrics)\n          this.setState({\n          });\n        });\n        this.database.child(\"temp\").on('value', (snap) => {\n          //console.log(\"printing\")\n          var lightArray = snap.val();\n          //console.log(lightArray)\n          temp.data = {\n            labels: labels,\n            series: [lightArray]\n          }\n          temp.title = \"Temp (ËšC)\" //name +\n          temp.high = 32\n          temp.low = 27\n          temp.updateInfo((1 - pctg) * Math.min(lightArray), (1 + pctg) * Math.max(lightArray))\n          if (!newLevels.includes(temp)) {\n            newLevels.push(temp)\n          }\n          newLevels.sort((first, second) => {\n            //console.log(first, second);\n            return this.compareObjects(first, second, \"title\");\n          });\n          //console.log(newLevels)\n          Object.assign(allMetrics, newLevels)\n          //console.log(\"allmetrics is\")\n          //console.log(allMetrics)\n          this.systemName = name;\n          this.setState({\n          });\n        });\n      });\n    })\n  };\n\n  render() {\n    //console.log(\"rendering\");\n    if (this.auth.currentUser == null) {\n      return (\n        <Login fn={this.signIn} />\n      )\n    } else {\n      return (\n        <Router history={hist}>\n          <Switch>\n            {/* <Admin></Admin> */}\n            <Route path=\"/admin\" render={props => <Admin refresh={this.refresh} systemName = {this.systemName}/>} />\n            {/* <Route path=\"/rtl\" component={RTL} /> */}\n            <Redirect from=\"/\" to=\"/admin/dashboard\" />\n            {/* <Dashboard/> */}\n          </Switch>\n        </Router>\n        // <div>\n        //   <h1>Count is {this.state.speed}</h1>\n        // </div>\n      );\n\n    }\n\n  }\n}\nReactDOM.render(\n  <App />,\n  document.getElementById(\"root\")\n);\n\n\n"]},"metadata":{},"sourceType":"module"}